### java实现jvm虚拟机

* 虚拟的虚拟机，虚拟虚拟机（笑）



#### 命令行操作

* java程序通过命令行进行实现，通过传入的参数对之后程序的运行状态进行判断，例如

  |       指令       |          说明          |
  | :--------------: | :--------------------: |
  |     -version     | 输出版本信息，然后退出 |
  |    -？/-help     | 输出帮助信息，然后退出 |
  |  -cp/-classpath  |     指定用户类路径     |
  | -Dproperty=value |    设置java系统属性    |
  |    -Xms<size>    |    设置堆空间大小，    |
  |    -Xmx<size>    |   设置最大堆空间大小   |
  |    -Xss<size>    |   设置线程栈空间大小   |



#### java搜索class文件

* 在运行用户类路径的用户代码之前，需要进行类加载，所以会按先后顺序搜索下列三个路径的class文件并加载。
* 启动类路径  bootstrap (默认在jre\lib中)
* 扩展类路径  extension (默认在jre\lib\ext)
* 用户类路径  user (默认为当前连接"."，可以使用-cp类追踪更改)
* -cp中使用分隔符加载多个用户类路径，Windows中使用";"分割，Unix中使用":"分割

* **实现方式** ：
  * Entry接口，定义实体接口用于传入的calss路径参数，并通过工厂方法根据参数类型返回需要用到的具体实例
  * CompositeEntry：传入的类路径参数有多个被(;或:)进行分割，则返回该类
  * WildcardEntry：传入的类路径为最后带有*号的泛指
  * ZipEntry：传入的参数用于解析Zip或jar包文件
  * DirEntry：传入的类路径参数为一个类的普通参数
  * Classpath：用于使用-Xjre命令行参数解析启动类和扩展类路径，使用-cp来加载解析用户类路径

